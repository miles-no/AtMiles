extends layout

block css
    link(rel='stylesheet', href="//cdnjs.cloudflare.com/ajax/libs/three.js/r68/three.min.js")

block scripts
    script(src='/javascripts/homepageController.js')

block content
    row#atMilesPage(ng-app="AtMiles" ng-controller="homepageController")
        div.contain-to-grid
            nav.miles-top-bar
                section
                    ul.left
                            img.miles-top-bar-image(src="../images/MilesIcon-01.png")
                    ul.right
                        a.signin-button(ng-show="isAuthenticated == false" ng-click="login()")
                            span.text-left SIGN IN
                        a.signout-button(ng-show="isAuthenticated == true" ng-click="logout()") SIGN OUT
        .row.banner
            .show-for-medium-up
                .medium-12.large-12.medium-centered.columns
                    img(src="../images/HomeSceneImage-01.jpg" height="370px" width="100%")
                .centered-button-container
                    a.button.medium.radius(ng-click="login()") LOGIN AND SEARCH
            .show-for-small-only
                .small-12.small-centered.columns
                    img.twelve-columns(src="../images/HomeSceneImageMobile-01.jpg" height="153px" width="100%")
        .row.small-12.small-centered.banner2.columns
                h3
                    span.banner2-text "@Miles let you quickly search for consultants within Miles organisation. Look up name, phone number and view e-mail address.
                    br
                    br
                    span.banner2-text Sign in with your Miles google account, and you are ready to go!
                    br
                    br
                    img(src="../images/Smily-01.png")
        .row
            .large-12.small-12.columns
                 div(ng-repeat="error in errors")
                    p.error
                        {{error}}
                 #debug.div
                    hr
                    b debug
                    br
                    | isAuthenticated={{isAuthenticated}}
                    br
                    hr

                 div(ng-show="isAuthenticated == false")
                     p Some intro text and images
                      a.button.small.radius(ng-click="login()") Log in



                 #mainContent.row(ng-show="isAuthenticated")
                    .large-12.columns
                    .row
                        .small-12.large-4.columns
                            input.input-lg(ng-keyup="search()" ng-model="queryTerm" ng-model-options="{debounce: 250}" type="text" placeholder="Search for employee..")
                    .row
                        .large-4.small-12.columns(ng-show="searchResult.Results.length > 0")
                            table.table.table-striped
                                tr(ng-repeat="item in searchResult.Results" ng-click="showDetails(item); $event.preventDefault();")
                                    td
                                        img(src="{{item.Thumb}}")
                                    td
                                        <b>{{item.Name}}</b>
                                        | {{item.OfficeName}} - {{item.JobTitle}}
                                tr(ng-show="moreSearchResults")
                                    td
                                    td
                                        a.center(href="#" ng-click="search('true'); $event.preventDefault();") {{moreSearchResults}} More...

                        .large-8.small-12.columns.panel(ng-show="selectedEmployee")
                            h3(ng-bind="selectedEmployee.name")
                            .row
                                div.large-12.columns(ng-hide="editContactInformationEnabled")
                                    table.large-6.columns.table
                                        tr
                                            td Email
                                            td {{selectedEmployee.email}}
                                        tr
                                            td Phone
                                            td {{selectedEmployee.phoneNumber}}
                                        tr
                                            td Address
                                            td {{selectedEmployee.address}}
                                    a.large-2.columns.button.tiny.radius.left(href="#" ng-click="editContactInformationEnabled=!editContactInformationEnabled; $event.preventDefault();") Edit
                                div.large-12.columns(ng-show="editContactInformationEnabled" )
                                    table.large-6.columns.table
                                        tr
                                            td Email
                                            td
                                                input.input-lg(ng-model="selectedEmployee.email")
                                        tr
                                            td Phone
                                            td
                                                input.input-lg(ng-model="selectedEmployee.phoneNumber")
                                        tr
                                            td Address
                                            td
                                                input.input-lg(ng-model="selectedEmployee.address")
                                    a.large-2.columns.button.tiny.radius.left(href="#" ng-click="editContactInformationEnabled=!editContactInformationEnabled; $event.preventDefault();") Done


                                p.large-12.columns(ng-bind="selectedEmployee.local.description")
                                .large-12.columns(ng-repeat="g in selectedEmployee.local.competencygroups")
                                    div
                                        hr
                                        b {{g.key}}
                                        br

                                    .left
                                        .label.round(ng-repeat="comp in g.competencies") {{comp}}&nbsp;


